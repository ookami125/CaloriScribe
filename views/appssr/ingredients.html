<div class="ambient"></div>
{{{header}}}
<div class="ui-fill ui-scroll">
  <main class="page">
    <section class="panel">
      <div class="panel-header">
        <div>
          <h1>Ingredient library</h1>
          <p>Capture barcodes, nutrition facts, and label details.</p>
        </div>
        <div class="panel-actions">
          <button class="primary" type="button" data-scan-trigger data-scan-target="ingredient">Scan barcode</button>
        </div>
      </div>
      <div class="panel-body split">
        <form id="ingredient-form" class="stacked-card">
          <h3 id="ingredient-form-title">Add ingredient</h3>
          <input id="ingredient-id" type="hidden" name="id">
          <div class="grid two">
            <label>
              Name
              <input type="text" name="name" required>
            </label>
            <label>
              Barcode
              <div class="field-row">
                <input id="barcode-input" type="text" name="barcode">
                <button class="ghost" id="barcode-lookup" type="button">Lookup</button>
              </div>
            </label>
            <label>
              Unit (g, ml, tbsp, piece)
              <input type="text" name="unit" required>
            </label>
            <label>
              Serving size (label)
              <input type="text" name="servingSize" placeholder="1 cup (240 ml)">
            </label>
            <label>
              Servings per container
              <input type="text" name="servingsPerContainer" placeholder="about 8">
            </label>
          </div>
          <div class="form-section">
            <h4>Nutrition facts per unit</h4>
            <div class="grid three">
              <label>
                Calories
                <input type="number" name="calories" step="0.01" required>
              </label>
              <label>
                Total fat (g)
                <input type="number" name="fat" step="0.01" required>
              </label>
              <label>
                Total carbs (g)
                <input type="number" name="carbs" step="0.01" required>
              </label>
              <label>
                Protein (g)
                <input type="number" name="protein" step="0.01" required>
              </label>
            </div>
            <div class="add-nutrient-row">
              <label>
                Additional facts
                <select id="extra-nutrient-select"></select>
              </label>
              <button class="ghost" id="add-nutrient" type="button">Add nutrient</button>
            </div>
            <div class="grid three" id="extra-nutrients"></div>
          </div>
          <label>
            Ingredients list
            <textarea name="ingredientsList" rows="3"></textarea>
          </label>
          <label>
            Other vitamins &amp; minerals
            <textarea name="vitamins" rows="2"></textarea>
          </label>
          <label>
            Allergens
            <textarea name="allergens" rows="2"></textarea>
          </label>
          <div class="form-actions">
            <button class="primary" id="ingredient-submit" type="submit">Save ingredient</button>
            <button class="ghost" id="ingredient-cancel" type="button" hidden>Cancel edit</button>
          </div>
          <p class="form-status" id="ingredient-status"></p>
        </form>
        <div>
          <div class="panel-tools">
            <input id="ingredient-search" type="search" placeholder="Search ingredients">
          </div>
          <div class="list scroll" id="ingredient-list"></div>
        </div>
      </div>
    </section>
  </main>
</div>

<div class="modal" id="scan-modal" aria-hidden="true">
  <div class="modal-card">
    <div class="modal-header">
      <h3>Scan barcode</h3>
      <button class="ghost" id="close-scan" type="button">Close</button>
    </div>
    <div class="scan-area">
      <video id="scan-video" autoplay playsinline></video>
      <div class="scan-target"></div>
    </div>
    <p class="form-status" id="scan-status"></p>
  </div>
</div>

{{{cardTemplates}}}
{{{confirmModal}}}

<script src="https://unpkg.com/@zxing/library@0.21.2/umd/index.min.js"></script>
<script src="/app.js"></script>
